import os
import glob

keyframes_dir = '/home/user/Output/Keyframes'
all_keyframe_paths = dict()

# Loop through directories that start with 'L' followed by digits (e.g., L01, L01_extra)
for part in sorted(os.listdir(keyframes_dir)):
    if not part.startswith('L') or not any(char.isdigit() for char in part):
        continue  # Skip directories that don't start with 'L' followed by digits
    
    data_part = part  # e.g., L01, L01_extra
    all_keyframe_paths[data_part] = dict()

for data_part in sorted(all_keyframe_paths.keys()):
    data_part_path = f'{keyframes_dir}/{data_part}'
    
    # Ensure the directory exists
    if not os.path.exists(data_part_path):
        print(f"Directory {data_part_path} does not exist, skipping.")
        continue
    
    video_dirs = sorted(os.listdir(data_part_path))
    
    # Exclude any unwanted directories like 'checkpoints'
    video_dirs = [d for d in video_dirs if d != 'checkpoints']
    
    video_ids = [video_dir.split('_')[-1] for video_dir in video_dirs]
    
    for video_id, video_dir in zip(video_ids, video_dirs):
        keyframe_paths = sorted(glob.glob(f'{data_part_path}/{video_dir}/*.jpg'))
        all_keyframe_paths[data_part][video_id] = keyframe_paths

# Now all_keyframe_paths will include all directories like L01, L01_extra
