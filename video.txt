import os

videos_dir = '/home/user/datasech/L01'
all_video_paths = dict()

# Filter out unwanted folders like 'checkpoints'
for part in sorted(os.listdir(videos_dir)):
    if "checkpoints" in part:
        print(f"Skipping {part} as it's not needed.")
        continue  # Skip this folder if 'checkpoints' is in the name
    
    data_part = part.split('_')[-1]  # e.g., L01, L02, etc.
    all_video_paths[data_part] = dict()

# Iterate over the parts and collect video paths
for data_part in sorted(all_video_paths.keys()):
    data_part_path = f'{videos_dir}/L01_{data_part}'
    
    # Check if directory exists before trying to list its contents
    if not os.path.exists(data_part_path):
        print(f"Directory {data_part_path} does not exist. Skipping.")
        continue

    video_paths = sorted(os.listdir(data_part_path))
    video_ids = [video_path.replace('.mp4', '').split('_')[-1] for video_path in video_paths]

    for video_id, video_path in zip(video_ids, video_paths):
        video_path_full = f'{data_part_path}/{video_path}'
        all_video_paths[data_part][video_id] = video_path_full

print("Collected video paths:", all_video_paths)
